<div class="settings-drawer ds-scope">
  <div class="drawer-header">
    <h2 class="drawer-title">{{ 'settingsDialog.title' | translate }}</h2>
    <button mat-icon-button type="button" (click)="close()" [attr.aria-label]="'settingsDialog.close' | translate">
      <span class="material-icons">close</span>
    </button>
  </div>
  <div class="drawer-scroll">
    <form [formGroup]="form" class="dialog-form form-grid">
      <app-settings-language-section [form]="form" />
      <app-settings-plan-section [accountSettings]="accountSettings" />
      <app-settings-profiles-section
        [form]="form"
        [profiles]="profiles"
        [activeProfileId]="activeProfileId"
        [avatars]="avatars()"
        [avatarPreviewSrc]="avatarPreviewSrc.bind(this)"
        [avatarOptionSrc]="avatarOptionSrc.bind(this)"
        [selectedAvatarDescription]="selectedAvatarDescription.bind(this)"
        [trackProfileById]="trackProfileById.bind(this)"
        (selectProfile)="onSelectProfile($event)"
        (deleteProfile)="onDeleteProfile($event.profileId, $event.event)"
      />
      <app-settings-cycle-section [form]="form" />
      <app-settings-levelup-section [form]="form" />
      <app-settings-cache-section (clearCache)="clearCacheAndReload()" (clearAll)="clearAllDataAndReload()" />
      <app-settings-danger-section [isLoggedIn]="isLoggedIn()" (openDeleteAccount)="openDeleteAccount()" />
    </form>
  </div>
  <div class="drawer-actions">
    <button mat-button (click)="close()">{{ 'settingsDialog.cancel' | translate }}</button>
    <button mat-flat-button color="primary" (click)="save()" [disabled]="form.invalid">
      {{ 'settingsDialog.save' | translate }}
    </button>
  </div>
</div>
