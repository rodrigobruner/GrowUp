<mat-toolbar color="primary" class="topbar">
  <div class="brand">
    <span class="material-icons">rocket_launch</span>
    <span class="brand-title">{{ 'app.title' | translate }}</span>
  </div>
  <app-profile-avatar
    *ngIf="showProfiles"
    class="center-avatar"
    [src]="avatarSrc"
    [profiles]="profiles"
    [activeProfileId]="activeProfileId"
    (createProfile)="openCreateProfile()"
    (editProfile)="openEditProfile()"
    (profileSelect)="selectProfile($event)"
  />
  <div class="spacer"></div>
  <app-user-menu
    [isLoggedIn]="isLoggedIn()"
    [avatarSrc]="avatarSrc"
    [userAvatarUrl]="userAvatarUrl()"
    [avatarLoadFailed]="avatarLoadFailed()"
    [authProvider]="authProvider()"
    [showSettings]="showSettings"
    (settingsClick)="settingsClick.emit()"
    (openAuthDialog)="emitOpenAuthDialog()"
    (openResetPassword)="openResetPassword()"
    (logout)="logout()"
  />
  <div class="sync-status" *ngIf="isLoggedIn() && showSyncStatus">
    <span
      *ngIf="!isOnline || syncError"
      class="status offline"
      [attr.title]="syncError || null"
      (click)="openSyncStatus()"
      role="button"
      tabindex="0"
    >
      <span class="dot"></span>
      {{ 'sync.offline' | translate }}
    </span>
    <span *ngIf="isOnline && isSyncing" class="status syncing">
      <span class="dot"></span>
      {{ 'sync.syncing' | translate }}
    </span>
    <span *ngIf="isOnline && !isSyncing && lastSyncAt && !syncError" class="status synced">
      <span class="dot"></span>
      {{ 'sync.syncedAt' | translate:{ time: (lastSyncAt | date:'shortTime') } }}
    </span>
    <span *ngIf="isOnline && !isSyncing && lastSyncAt && !syncError" class="status updated">
      <span class="dot"></span>
      {{ 'sync.updatedAt' | translate:{ time: (lastSyncAt | date:'shortTime') } }}
    </span>
  </div>
</mat-toolbar>
