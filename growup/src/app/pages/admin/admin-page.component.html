<div class="admin-shell">
  <app-topbar
    [balance]="0"
    [avatarSrc]="avatarSrc()"
    [showProfiles]="false"
    [showSettings]="false"
    [showSyncStatus]="false"
    (openAuthDialog)="openAuth()"
  />

  <main class="admin-content">
    <section class="admin-header">
      <p class="eyebrow">{{ 'admin.eyebrow' | translate }}</p>
    </section>

    <section class="admin-tabs ds-scope">
      <nav class="admin-menu" aria-label="admin menu">
        <button
          type="button"
          class="admin-menu__item"
          [class.is-active]="activeTab() === 'overview'"
          (click)="setTab('overview')"
        >
          {{ 'admin.tabs.overview' | translate }}
        </button>
        <button
          type="button"
          class="admin-menu__item"
          [class.is-active]="activeTab() === 'users'"
          (click)="setTab('users')"
        >
          {{ 'admin.tabs.users' | translate }}
        </button>
        <button
          type="button"
          class="admin-menu__item"
          [class.is-active]="activeTab() === 'features'"
          (click)="setTab('features')"
        >
          {{ 'admin.tabs.features' | translate }}
        </button>
        <button
          type="button"
          class="admin-menu__item"
          [class.is-active]="activeTab() === 'logs'"
          (click)="setTab('logs')"
        >
          {{ 'admin.tabs.logs' | translate }}
        </button>
      </nav>

      <div class="tab-body" *ngIf="activeTab() === 'overview'">
        <app-admin-overview-tab
          [labels]="chartLabels()"
          [series]="chartSeries()"
          [loading]="chartLoading()"
          [emptyLabel]="'admin.overview.empty' | translate"
        />
      </div>

      <div class="tab-body" *ngIf="activeTab() === 'users'">
        <app-admin-users-tab
          [users]="users()"
          [usersColumns]="usersColumns()"
          [usersGridOptions]="usersGridOptions"
          [usersColumnVisibility]="usersColumnVisibility()"
          [usersTotalCount]="usersTotalCount()"
          [usersPage]="usersPage()"
          [usersTotalPages]="usersTotalPages()"
          (usersSearch)="onUsersSearch($event)"
          (copyUsersCsv)="copyUsersCsv()"
          (exportUsersCsv)="exportUsersCsv()"
          (toggleUsersColumn)="toggleUsersColumn($event)"
          (usersGridReady)="onUsersGridReady($event)"
          (previousUsersPage)="previousUsersPage()"
          (nextUsersPage)="nextUsersPage()"
          (goToUsersPage)="goToUsersPage($event)"
        />
      </div>

      <div class="tab-body" *ngIf="activeTab() === 'features'">
        <app-admin-features-tab
          [featureFlags]="featureFlags()"
          [featuresLoading]="featuresLoading()"
          [featureToggleMap]="featureToggleMap()"
          [featuresSaving]="featuresSaving()"
          (toggleFeature)="toggleFeature($event.plan, $event.featureKey, $event.enabled)"
        />
      </div>

      <div class="tab-body" *ngIf="activeTab() === 'logs'">
        <app-admin-logs-tab
          [logEntriesView]="logEntriesView()"
          [logLevelFilter]="logLevelFilter()"
          [loggingEnabled]="loggingEnabled()"
          (refreshLogs)="refreshLogs()"
          (clearLogs)="clearLogs()"
          (exportLogs)="exportLogs()"
          (toggleLogging)="toggleLogging()"
          (logFilterChange)="onLogFilterChange($event)"
        />
      </div>
    </section>

    <app-footer [currentYear]="currentYear" />
  </main>
</div>
